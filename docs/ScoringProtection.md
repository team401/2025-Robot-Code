# Scoring Protection System

The scoring subsystem can collide with itself/ground intake (see comment in ScoringSubsystem.java). Here's how it protects itself:

| Elevator Height                | Wrist Position                 | Clamps Applied                                    | Expected Action                                                                                                                                                                                                                                                                                                   |
|--------------------------------|--------------------------------|---------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Bottom                         | Intake                         | Elevator clamped below cross-bar                  | Wrist would hit cross-bar if elevator moved up in this position, so it is not allowed to go up that high                                                                                                                                                                                                          |
| Top, going down                | Going to coral intake          | Wrist clamped outside cross-bar                   | Wrist would hit cross-bar on the way down if allowed to go in, so it must wait to go in until below bar.                                                                                                                                                                                                          |
| Bottom                         | Going to ground intake         | Wrist clamped above where it hits ground          | Claw would hit the chassis of robot until elevator raises up enough for it to unfold down, so clamp it up until then.                                                                                                                                                                                             |
| Ground intaking, going to idle | Ground intaking, going to idle | Elevator clamped above where it would crush wrist | If elevator moved down to idle immediately, claw would be crushed, so it waits until the wrist is back up before it moves down.                                                                                                                                                                                   |
| Down, going up                 | Up/in (intaking)               | Wrist clamped outside cross-bar                   | Because elevator is below cross-bar but is aiming to be above crossbar (or vice versa), wrist must be clamped so that it doesn't hit crossbar. Wrist moves out of way of crossbar while elevator waits for it to be in a safe position before moving past crossbar. Then both systems continue to their setpoints |

This next table is for interactions with the ground intake. Wrist position isn't included because its fairly inconsequential (NEED TO CONFIRM THIS), but we basically assume that it will collide no matter what position it's in.

| Elevator Height                     | Elevator Goal | Ground Intake Position          | Clamps Applied                                                                                                                                                               | Expected Action                                                                                                                                                                                                                        |
|-------------------------------------|---------------|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Bottom/Idle                         | Up (e.g. L4)  | In (idle/safe driving position) | Elevator clamped below ground intake while ground intake is in, ground intake clamped outside of where it will collide with elevator.                                        | Elevator will wait for ground intake to swing out of the way, then its clamp is removed and it moves past. Once elevator is past, ground intake's clamp is removed and it goes back to its original position against elevator          |
| Bottom/Idle                         | Ground intake | In                              | Elevator clamped below ground intake while ground intake is in, ground intake clamped to swing far enough out to let wrist unfold.                                           | Elevator waits for ground intake before moving up a little for ground intake and unfolding. After unfolded, the ground intake clamp is removed and ground intake comes back up slightly to ground intake setpoint.                     |
| Up                                  | Down          | In                              | Elevator clamped above ground intake while ground intake is in, ground intake clamped outside of where it will collide with elevator.                                        | Elevator will wait above ground intake until it swings out of the way, then move past, then ground intake clamp removed and ground intake folds back against elevator.                                                                 |
| Ground intake (including wrist out) | Idle/wrist in | Ground intake                   | Elevator clamped up (because wrist is currently out), wrist clamped to be out while ground intake is in ground intake position, ground intake clamped to move out of the way | Wrist waits for ground intake to swing out of the way, then folds back into elevator. Then elevator moves back down, then ground intake clamp that was active from the elevator's position is removed and ground intake folds back in. |
